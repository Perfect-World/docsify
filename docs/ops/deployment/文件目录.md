## 目录结构图

```
/yykj/          						# 根目录
├── deployment								# 部署
│   ├── docker								# docker安装
│   ├── docker-images					# docker镜像
│   ├── git-config						# git配置
│   ├── mysql-config					# mysql配置
│   ├── nginx-config					# nginx配置
│   ├── scsmp					# 项目文件
│   │   ├── dist.zip # 前端文件
│   │   └── scsmp_prod.jar # 后端文件
│   ├── sh										# 执行脚本
│   │   ├── create_path.sh # 所有路径
│   │   ├── server_info.sh # 服务器信息
│   │   ├── deploy_scsmp_java.sh # 后端脚本
│   │   ├── deploy_scsmp_sql.sh # sql脚本
│   │   └── deploy_scsmp_vue.sh # 前端vue脚本
│   ├── sh.tar.gz
│   ├── docker.tar.gz
│   ├── docker-images.tar.gz
│   ├── git-config.tar.gz
│   ├── nginx-config.tar.gz
│   └── mysql-config.tar.gz
├── backup										# 备份
│   ├── logs 										# 日志
│   ├── java 										# java
│   ├── vue 										# vue
│   ├── h5 											# h5
│   ├── mysql 									# 数据库
│   └── server_info.txt					# 服务器信息
├── environment								# 环境
│   ├── docker 							  	# 容器
│   ├── git 										# 源码
│   │  └── .ssh										# 私钥
│   ├── node 										# vue编译
│   │  ├── node_modules						# 插件
│   │  └── repositories						# 软件源配置
│   ├── maven 									# java依赖库
│   │  ├── maven-jar							# jar仓库
│   │  └── settings.xml						# 配置
│   ├── nginx 									# 路由服务
│   └── mysql 									# 数据库
│       ├── conf									# 配置
│       ├── data									# 数据
│       └── logs									# 日志
└── project										# 项目
    ├── scsmp-java 						# 智慧校安-后端
    │   ├── code 							# 源码
    │   ├── files							# 文件
    │   ├── logs    					# 日志
    │   └── jars							# 包
    ├── scsmp-vue 						# 智慧校安-PC端
    │   ├── code							# 源码
    │   ├── data							# 打包
    │   ├── dist							# 访问目录
    │   ├── logs							# 日志
    │   └── conf							# 配置
    └── scsmp-h5 							# 智慧校安-H5端
        ├── code
        ├── dist
        ├── logs
        └── conf
        
```



### 压缩/解压

> 本地服务器

```bash
# 压缩
tar -zcf /yykj/deployment/docker.tar.gz -C /yykj/deployment/docker .
tar -zcf /yykj/deployment/docker-images.tar.gz -C /yykj/deployment/docker-images .
tar -zcf /yykj/deployment/git-config.tar.gz -C /yykj/deployment/git-config .
tar -zcf /yykj/deployment/mysql-config.tar.gz -C /yykj/deployment/mysql-config .
tar -zcf /yykj/deployment/nginx-config.tar.gz -C /yykj/deployment/nginx-config .
tar -zcf /yykj/deployment/sh.tar.gz -C /yykj/deployment/sh .
# 解压
tar -zxf /yykj/deployment/docker.tar.gz -C /yykj/deployment/docker
tar -zxf /yykj/deployment/docker-images.tar.gz -C /yykj/deployment/docker-images
tar -zxf /yykj/deployment/git-config.tar.gz -C /yykj/deployment/git-config
tar -zxf /yykj/deployment/mysql-config.tar.gz -C /yykj/deployment/mysql-config
tar -zxf /yykj/deployment/nginx-config.tar.gz -C /yykj/deployment/nginx-config
tar -zxf /yykj/deployment/sh.tar.gz -C /yykj/deployment/sh
```

### 执行脚本

> 部署服务器

```bash
#!/bin/bash

# 递归创建所有目录
sudo mkdir -p /yykj/{deployment/{docker,docker-images,git-config,mysql-config,nginx-config,scsmp,sh},backup/{logs,java,vue,h5,mysql},environment/{docker,git/.ssh,node/{node_modules,repositories},maven/{maven-jar},nginx,mysql/{conf,data,logs}},project/{scsmp-java/{code,files,logs,jars},scsmp-vue/{code,data,dist,logs,conf},scsmp-h5/{code,dist,logs,conf}}}
# 赋予目录基础读写权限
sudo chmod -R 755 /yykj/*
# 下载
sudo curl -fSL --retry 3 --output "/yykj/deployment/docker.tar.gz" "http://121.237.178.252/deployment/docker.tar.gz";
sudo curl -fSL --retry 3 --output "/yykj/deployment/docker-images.tar.gz" "http://121.237.178.252/deployment/docker-images.tar.gz";
sudo curl -fSL --retry 3 --output "/yykj/deployment/git-config.tar.gz" "http://121.237.178.252/deployment/git-config.tar.gz";
sudo curl -fSL --retry 3 --output "/yykj/deployment/mysql-config.tar.gz" "http://121.237.178.252/deployment/mysql-config.tar.gz";
sudo curl -fSL --retry 3 --output "/yykj/deployment/nginx-config.tar.gz" "http://121.237.178.252/deployment/nginx-config.tar.gz";
sudo curl -fSL --retry 3 --output "/yykj/deployment/sh.tar.gz" "http://121.237.178.252/deployment/sh.tar.gz";
# 解压
tar -zxf /yykj/deployment/docker.tar.gz -C /yykj/deployment/docker
tar -zxf /yykj/deployment/docker-images.tar.gz -C /yykj/deployment/docker-images
tar -zxf /yykj/deployment/git-config.tar.gz -C /yykj/environment/git
tar -zxf /yykj/deployment/mysql-config.tar.gz -C /yykj/environment/mysql
tar -zxf /yykj/deployment/nginx-config.tar.gz -C /yykj/environment/nginx
tar -zxf /yykj/deployment/sh.tar.gz -C /yykj/deployment/sh
# 赋予目录基础读写权限
sudo chmod -R 755 /yykj/*
```

